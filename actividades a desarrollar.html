<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Organizador Semanal</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f6f9;
      color: #333;
    }

    nav {
      background: #2c3e50;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    nav .logo {
      font-size: 1.4rem;
      font-weight: bold;
      letter-spacing: 1px;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 20px;
      margin: 0;
      padding: 0;
    }

    nav ul li a {
      text-decoration: none;
      color: #ecf0f1;
      font-weight: 500;
      transition: color 0.3s;
    }

    nav ul li a:hover {
      color: #1abc9c;
    }

    .container {
      padding: 20px;
      text-align: center;
    }

    h1 {
      color: #2c3e50;
      margin-bottom: 30px;
    }

    .week {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 15px;
    }

    .day {
      background: #fff;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .day h3 {
      margin-top: 0;
      color: #34495e;
    }

    button {
      background: #1abc9c;
      color: white;
      border: none;
      padding: 8px 12px;
      margin-top: 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.3s;
    }

    button:hover {
      background: #16a085;
    }

    .task {
      background: #ecf0f1;
      padding: 8px;
      border-radius: 6px;
      margin: 5px 0;
      width: 100%;
      text-align: center;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 0.9rem;
    }

    .task:hover {
      background: #dcdde1;
    }

    .completed {
      text-decoration: line-through;
      color: gray;
    }

    /* ===== Modal ===== */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      width: 320px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .modal-content h2 {
      margin-top: 0;
      color: #2c3e50;
    }

    .modal input, .modal select {
      width: 90%;
      padding: 8px;
      margin: 10px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .personal-section {
      margin-top: 50px;
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .users {
      display: flex;
      gap: 30px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .user {
      background: #ecf0f1;
      padding: 15px;
      border-radius: 8px;
      min-width: 120px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .user:hover {
      transform: scale(1.05);
      background: #dcdde1;
    }

    .user strong {
      display: block;
      margin-bottom: 5px;
      color: #34495e;
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo">ðŸ“… Mi Agenda</div>
    <ul>
      <li><a href="#">Planificador Semanal</a></li>
      <li><a href="#">Calendario Mensual</a></li>
      <li><a href="#">Notas RÃ¡pidas</a></li>
      <li><a href="#personal">Personal</a></li>
      <li><a href="#">ConfiguraciÃ³n</a></li>
    </ul>
  </nav>

  <div class="container">
    <h1>Mi Planificador Semanal</h1>
    <div class="week">
      <div class="day" data-day="Lunes">
        <h3>Lunes</h3>
        <button onclick="addTask('Lunes')">+ Agregar actividad</button>
      </div>
      <div class="day" data-day="Martes">
        <h3>Martes</h3>
        <button onclick="addTask('Martes')">+ Agregar actividad</button>
      </div>
      <div class="day" data-day="MiÃ©rcoles">
        <h3>MiÃ©rcoles</h3>
        <button onclick="addTask('MiÃ©rcoles')">+ Agregar actividad</button>
      </div>
      <div class="day" data-day="Jueves">
        <h3>Jueves</h3>
        <button onclick="addTask('Jueves')">+ Agregar actividad</button>
      </div>
      <div class="day" data-day="Viernes">
        <h3>Viernes</h3>
        <button onclick="addTask('Viernes')">+ Agregar actividad</button>
      </div>
      <div class="day" data-day="SÃ¡bado">
        <h3>SÃ¡bado</h3>
        <button onclick="addTask('SÃ¡bado')">+ Agregar actividad</button>
      </div>
      <div class="day" data-day="Domingo">
        <h3>Domingo</h3>
        <button onclick="addTask('Domingo')">+ Agregar actividad</button>
      </div>
    </div>

    <!-- ===== SecciÃ³n PERSONAL ===== -->
    <div id="personal" class="personal-section">
      <h2>ðŸ‘¥ Personal</h2>
      <div class="users" id="usersContainer">
        <div class="user" onclick="editUser(this)">
          <strong>JosÃ©</strong>
          <span>Administrador</span>
        </div>
        <div class="user" onclick="editUser(this)">
          <strong>Natalia</strong>
          <span>Editor</span>
        </div>
      </div>
      <button onclick="addUser()">+ Agregar personal</button>
    </div>
  </div>

  <!-- ===== Modal de tareas ===== -->
  <div id="taskModal" class="modal">
    <div class="modal-content">
      <h2>Editar Actividad</h2>
      <input type="text" id="taskInput" placeholder="Nombre de la actividad">
      <select id="assignedUser"></select>
      <br>
      <button onclick="saveTask()">Guardar</button>
      <button onclick="toggleComplete()">Finalizar</button>
      <button onclick="deleteTask()">Eliminar</button>
      <button onclick="closeModal()">Cancelar</button>
    </div>
  </div>

  <!-- ===== Modal de ediciÃ³n de personal ===== -->
  <div id="userModal" class="modal">
    <div class="modal-content">
      <h2>Editar Personal</h2>
      <input type="text" id="userName" placeholder="Nombre">
      <input type="text" id="userRole" placeholder="Rol">
      <br>
      <button onclick="saveUser()">Guardar</button>
      <button onclick="closeUserModal()">Cancelar</button>
    </div>
  </div>

  <script>
    let currentTask = null;
    let currentUser = null;

    // === TAREAS ===
    function addTask(day) {
      const taskText = prompt("Ingrese la actividad para " + day + ":");
      if (taskText) {
        const dayDiv = document.querySelector(`.day[data-day='${day}']`);
        const taskDiv = document.createElement("div");
        taskDiv.className = "task";
        taskDiv.textContent = taskText;
        taskDiv.dataset.user = "";
        taskDiv.onclick = () => openModal(taskDiv);
        dayDiv.insertBefore(taskDiv, dayDiv.querySelector("button"));
      }
    }

    function openModal(taskElement) {
      currentTask = taskElement;
      document.getElementById("taskInput").value = taskElement.textContent.split(" - Asignado a:")[0];
      document.getElementById("assignedUser").value = taskElement.dataset.user || "";
      document.getElementById("taskModal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("taskModal").style.display = "none";
    }

    function saveTask() {
      if (currentTask) {
        const taskName = document.getElementById("taskInput").value;
        const assignedUser = document.getElementById("assignedUser").value;
        currentTask.dataset.user = assignedUser;
        currentTask.textContent = assignedUser
          ? `${taskName} - Asignado a: ${assignedUser}`
          : taskName;
        currentTask.onclick = () => openModal(currentTask);
      }
      closeModal();
    }

    function toggleComplete() {
      if (currentTask) {
        currentTask.classList.toggle("completed");
      }
      closeModal();
    }

    function deleteTask() {
      if (currentTask) {
        currentTask.remove();
      }
      closeModal();
    }

    // === PERSONAL ===
    function addUser() {
      const name = prompt("Ingrese el nombre del nuevo personal:");
      if (!name) return;

      const role = prompt("Ingrese el rol de " + name + ":");
      if (!role) return;

      const usersContainer = document.getElementById("usersContainer");
      const userDiv = document.createElement("div");
      userDiv.className = "user";
      userDiv.onclick = () => editUser(userDiv);
      userDiv.innerHTML = `<strong>${name}</strong><span>${role}</span>`;
      usersContainer.appendChild(userDiv);

      addUserToSelect(name, role);
    }

    function editUser(userDiv) {
      currentUser = userDiv;
      document.getElementById("userName").value = userDiv.querySelector("strong").textContent;
      document.getElementById("userRole").value = userDiv.querySelector("span").textContent;
      document.getElementById("userModal").style.display = "flex";
    }

    function saveUser() {
      if (currentUser) {
        const newName = document.getElementById("userName").value;
        const newRole = document.getElementById("userRole").value;
        currentUser.querySelector("strong").textContent = newName;
        currentUser.querySelector("span").textContent = newRole;

        updateUserInSelect(newName, newRole);
      }
      closeUserModal();
    }

    function closeUserModal() {
      document.getElementById("userModal").style.display = "none";
    }

    // === ACTUALIZAR LISTA DE ASIGNACIÃ“N ===
    function addUserToSelect(name, role) {
      const assignedUserSelect = document.getElementById("assignedUser");
      const option = document.createElement("option");
      option.value = name;
      option.textContent = `${name} (${role})`;
      assignedUserSelect.appendChild(option);
    }

    function updateUserInSelect(name, role) {
      const assignedUserSelect = document.getElementById("assignedUser");
      let option = [...assignedUserSelect.options].find(opt => opt.value === currentUser.querySelector("strong").textContent);
      if (option) {
        option.value = name;
        option.textContent = `${name} (${role})`;
      }
    }

    // Inicializar lista de usuarios en selector
    window.onload = () => {
      document.querySelectorAll("#usersContainer .user").forEach(userDiv => {
        const name = userDiv.querySelector("strong").textContent;
        const role = userDiv.querySelector("span").textContent;
        addUserToSelect(name, role);
      });
    };
  </script>
</body>
</html>
